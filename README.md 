# IntervalFlow API

A RESTful API for managing Tabata/HIIT interval training workouts. Built with Node.js, Express, and MongoDB.

## ğŸ¯ Project Overview

IntervalFlow is a backend API that enables users to:
- Browse and filter workout exercises by difficulty, muscle group, and equipment
- Create custom exercises and save them to their account
- Authenticate securely with JWT tokens
- Build personalized Tabata/HIIT training programs

This API is designed with security and scalability in mind, featuring rate limiting, password hashing, and protected routes.

## âœ¨ Key Features

- **Exercise Management**: Full CRUD operations for ~60 pre-loaded exercises
- **User Authentication**: Secure registration and login with JWT tokens
- **Advanced Filtering**: Filter exercises by difficulty, muscle group, equipment
- **Security**: bcrypt password hashing, rate limiting, JWT authentication
- Follows REST principles and RFC 2616 HTTP standards

## ğŸ“¦ Prerequisites

Ensure you have the following installed:

- [Node.js](https://nodejs.org/) (v18 or higher)
- [MongoDB](https://www.mongodb.com/try/download/community) (v6 or higher)
- npm (comes with Node.js)
- [MongoDB Compass](https://www.mongodb.com/products/compass) (optional)

## ğŸš€ Quick Start

### 1. Clone and Install
```bash
# Clone the repository
git clone git@github.com:AnnetDev/-IntervalFlow.git
cd IntervalFlow/backend

# Install dependencies
npm install
```

### 2. Configure Environment

Create a `.env` file in the `backend` directory:
```env
# Server Configuration
PORT=3000
NODE_ENV=development

# MongoDB Configuration
MONGO_URI=mongodb://localhost:27017/intervalflow

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRE=7d

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
```

âš ï¸ **Important**: Change `JWT_SECRET` to a random string in production!

### 3. Start MongoDB

**Option A: Background service (macOS with Homebrew)**
```bash
brew services start mongodb-community
```

**Option B: Manual start (any OS)**

Open a new terminal window:
```bash
mongod --dbpath ~/data/db
```

Keep this terminal open while running the API.

### 4. Seed the Database

Populate the database with 60+ exercises:
```bash
npm run seed
```

Expected output:
```
âœ… Connected to MongoDB
ğŸ—‘ï¸  Cleared existing exercises
âœ… 60+ exercises added to database
ğŸ‘‹ Disconnected from MongoDB
```

### 5. Start the Server

**Development mode** (with auto-reload):
```bash
npm run dev
```

**Production mode**:
```bash
npm start
```

Expected output:
```
âœ… MongoDB Connected: localhost
ğŸ“Š Database: intervalflow
ğŸš€ Server is running on port 3000
ğŸŒ API URL: http://localhost:3000
ğŸ’š Health check: http://localhost:3000/api/health
```

âœ… **The API is now running at** `http://localhost:3000`

### 6. Test the API

Open your browser or Postman/Yaak and visit:
```
http://localhost:3000/api/health
```

You should see:
```json
{
  "success": true,
  "message": "IntervalFlow API is running! ğŸƒâ€â™‚ï¸",
  "timestamp": "2026-02-04T21:30:00.000Z"
}
```

## ğŸ“š Documentation

For complete API documentation, including all endpoints, request/response examples, and authentication details, see:

**[API_DOCUMENTATION.md](./API_DOCUMENTATION.md)**

Quick links:
- [Authentication Endpoints](./API_DOCUMENTATION.md#authentication)
- [Exercise Endpoints](./API_DOCUMENTATION.md#exercises)
- [Status Codes](./API_DOCUMENTATION.md#status-codes)
- [Testing Guide](./API_DOCUMENTATION.md#testing)

## ğŸ“ Project Structure
```
intervalflow/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ config/          # Database configuration
â”‚   â”‚   â”œâ”€â”€ models/          # Mongoose schemas (Exercise, User)
â”‚   â”‚   â”œâ”€â”€ controllers/     # Business logic
â”‚   â”‚   â”œâ”€â”€ routes/          # API endpoints
â”‚   â”‚   â”œâ”€â”€ middleware/      # Auth, rate limiting
â”‚   â”‚   â”œâ”€â”€ utils/           # Helper functions
â”‚   â”‚   â”œâ”€â”€ seeders/         # Database seed scripts
â”‚   â”‚   â””â”€â”€ server.js        # Entry point
â”‚   â”œâ”€â”€ .env                 # Environment variables
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ frontend/                # (Future development)
â”œâ”€â”€ API_DOCUMENTATION.md     # Complete API docs
â””â”€â”€ README.md                # This file
```

## ğŸ”’ Security Features

- **Password Hashing**: bcrypt with salt (10 rounds)
- **JWT Authentication**: Token-based auth with expiration
- **Rate Limiting**: 
  - Login: 5 attempts per 15 minutes
  - General API: 100 requests per 15 minutes
- **Input Validation**: Mongoose schemas + express-validator
- **NoSQL Injection Prevention**: Sanitized inputs
- **Protected Routes**: JWT verification middleware

## ğŸ§ª Quick Test

1. **Register a user:**
```bash
   curl -X POST http://localhost:3000/api/auth/register \
     -H "Content-Type: application/json" \
     -d '{"username":"testuser","email":"test@example.com","password":"test123"}'
```

2. **Get exercises:**
```bash
   curl http://localhost:3000/api/exercises?difficulty=beginner
```

For detailed testing instructions, see [API_DOCUMENTATION.md](./API_DOCUMENTATION.md#testing).

## ğŸ› Troubleshooting

### MongoDB Connection Error
1. Ensure MongoDB is running: `mongod --dbpath ~/data/db`
2. Check `.env` file has correct `MONGO_URI`
3. Verify port 27017 is not in use

### Port Already in Use
1. Stop other processes using port 3000
2. Change `PORT` in `.env` file
3. Kill process: `lsof -ti:3000 | xargs kill -9`

### Rate Limit Error (429)
1. Wait 15 minutes for reset
2. Restart server (development only)

## ğŸ“ Available Scripts
```bash
npm start      # Start production server
npm run dev    # Start development server (auto-reload)
npm run seed   # Populate database with exercises
```

## ğŸ“„ License

MIT License

## ğŸ‘¤ Author

Anna Baidikova  

